<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Mode Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
            background-color: #FFFFFF;    /* Light mode: Pure white background */
            color: #1A1A1A;              /* Light mode: Dark text for contrast */
        }
        
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #0B1426;    /* Dark mode: Very dark background */
                color: #F7FAFC;               /* Dark mode: Very light text */
            }
            
            .card {
                background-color: #1A202C !important;  /* Dark mode: Dark card background */
                border-color: #2D3748 !important;      /* Dark mode: Subtle borders */
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4) !important;
            }
            
            .theme-indicator {
                background: #00C9DE !important;  /* Brand color in dark mode */
            }
            
            .instructions {
                background: #1A202C !important;
                color: #E2E8F0 !important;
                border-left-color: #00C9DE !important;
            }
        }
        
        .card {
            background: #FFFFFF;              /* Light mode: Pure white cards */
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #E2E8F0;       /* Light mode: Subtle border */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            transition: all 0.3s ease;
            color: #1A1A1A;                  /* Light mode: Dark text */
        }
        
        .theme-indicator {
            padding: 10px 20px;
            border-radius: 8px;
            background: #3b82f6;             /* Light mode: Blue background */
            color: white;
            margin: 10px 0;
        }
        
        .instructions {
            background: #F8F9FA;             /* Light mode: Very light gray */
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3b82f6;
            color: #2D3748;                  /* Light mode: Dark text for instructions */
        }
        
        @media (prefers-color-scheme: dark) {
            .instructions {
                background: #1e293b;
                color: #e2e8f0;
            }
        }
    </style>
</head>
<body>
    <h1>üåì Dark Mode System Test</h1>
    
    <div class="instructions">
        <h3>How to Test:</h3>
        <ol>
            <li>Open this page in your browser</li>
            <li>Change your system's appearance mode:
                <ul>
                    <li><strong>macOS:</strong> System Preferences ‚Üí General ‚Üí Appearance</li>
                    <li><strong>Windows 10/11:</strong> Settings ‚Üí Personalization ‚Üí Colors ‚Üí Choose your color</li>
                    <li><strong>Linux (GNOME):</strong> Settings ‚Üí Appearance</li>
                </ul>
            </li>
            <li>Watch the page automatically switch between light and dark themes</li>
            <li>Check browser console for theme change logs</li>
        </ol>
    </div>
    
    <div class="card">
        <h2>üé® Theme Information</h2>
        <div class="theme-indicator" id="theme-indicator">
            Current theme: <span id="current-theme">Loading...</span>
        </div>
        <p>Last theme change: <span id="last-change">Never</span></p>
        <p>System preference changes: <span id="change-count">0</span></p>
    </div>
    
    <div class="card">
        <h2>üöÄ Ubongo IQ Website</h2>
        <p>Your main website should now automatically adapt to system appearance changes!</p>
        <a href="http://localhost:8000" target="_blank" style="color: #3b82f6; text-decoration: none;">
            ‚Üí Visit Ubongo IQ Website
        </a>
    </div>
    
    <div class="card">
        <h2>‚ú® Features Implemented</h2>
        <ul>
            <li>‚úÖ System theme detection via <code>prefers-color-scheme</code></li>
            <li>‚úÖ Real-time theme switching without page reload</li>
            <li>‚úÖ Smooth transitions between light and dark modes</li>
            <li>‚úÖ Mobile browser theme-color meta tag updates</li>
            <li>‚úÖ Custom elements and modals theme adaptation</li>
            <li>‚úÖ Performance optimized with debounced theme changes</li>
            <li>‚úÖ Support for both old and new browser APIs</li>
            <li>‚úÖ HTMX compatibility for dynamically loaded content</li>
        </ul>
    </div>

    <div class="card">
        <h2>üîç Contrast & Visibility Improvements</h2>
        <h3>Light Mode:</h3>
        <ul>
            <li>‚úÖ Text color: <span style="color: #1A1A1A; font-weight: bold;">#1A1A1A (Dark)</span> on white background</li>
            <li>‚úÖ Secondary text: <span style="color: #2D3748; font-weight: bold;">#2D3748</span> for better contrast</li>
            <li>‚úÖ Muted text: <span style="color: #4A5568; font-weight: bold;">#4A5568</span> - still readable</li>
        </ul>
        <h3>Dark Mode:</h3>
        <ul>
            <li>‚úÖ Background: <span style="background: #0B1426; color: white; padding: 2px 4px; border-radius: 3px;">#0B1426 (Very Dark)</span></li>
            <li>‚úÖ Text: <span style="background: #F7FAFC; color: black; padding: 2px 4px; border-radius: 3px;">#F7FAFC (Very Light)</span></li>
            <li>‚úÖ Footer always has proper contrast with fixed colors</li>
            <li>‚úÖ Brand color <span style="background: #00C9DE; color: white; padding: 2px 4px; border-radius: 3px;">#00C9DE</span> maintained</li>
        </ul>
        <p><strong>Result:</strong> WCAG AA compliant contrast ratios in both modes!</p>
    </div>

    <script>
        let changeCount = 0;
        
        // Function to update theme info
        function updateThemeInfo(isDark) {
            document.getElementById('current-theme').textContent = isDark ? 'Dark Mode üåô' : 'Light Mode ‚òÄÔ∏è';
            document.getElementById('last-change').textContent = new Date().toLocaleTimeString();
            document.getElementById('change-count').textContent = changeCount;
        }
        
        // Listen for system theme changes
        const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        
        function handleThemeChange(e) {
            changeCount++;
            updateThemeInfo(e.matches);
            console.log(`üé® Theme changed to: ${e.matches ? 'dark' : 'light'} mode at ${new Date().toLocaleTimeString()}`);
        }
        
        // Add listeners for better browser support
        darkModeMediaQuery.addListener(handleThemeChange);
        if (darkModeMediaQuery.addEventListener) {
            darkModeMediaQuery.addEventListener('change', handleThemeChange);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateThemeInfo(darkModeMediaQuery.matches);
            console.log('üåì Dark mode test initialized');
            console.log('üí° To test: Change your system appearance in Settings');
        });
    </script>
</body>
</html>